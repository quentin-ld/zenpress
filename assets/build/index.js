(()=>{"use strict";var e={n:s=>{var t=s&&s.__esModule?()=>s.default:()=>s;return e.d(t,{a:t}),t},d:(s,t)=>{for(var n in t)e.o(t,n)&&!e.o(s,n)&&Object.defineProperty(s,n,{enumerable:!0,get:t[n]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.wp.domReady;var t=e.n(s);const n=window.wp.element,i=window.wp.i18n,a=window.wp.components,r=window.wp.apiFetch;var o=e.n(r);const c=window.wp.data,p=window.wp.notices,l=window.ReactJSXRuntime,d=({label:e,value:s,onChange:t,help:n})=>(0,l.jsx)(a.ToggleControl,{label:e,checked:s,onChange:t,help:n,__nextHasNoMarginBottom:!0}),h=({onClick:e,isBusy:s})=>(0,l.jsx)(a.Button,{variant:"primary",onClick:e,isBusy:s,__next40pxDefaultSize:!0,children:(0,i.__)("Save settings","zenpress")}),u=()=>{const{removeNotice:e}=(0,c.useDispatch)(p.store),s=(0,c.useSelect)(e=>e(p.store).getNotices());return s?.length?(0,l.jsx)(a.NoticeList,{notices:s,onRemove:e}):null},_=()=>{const{snippets:e,setSnippets:s,saveSettings:t,isSaving:r}=(()=>{const[e,s]=(0,n.useState)({}),[t,a]=(0,n.useState)(!1),{createSuccessNotice:r,createErrorNotice:l}=(0,c.useDispatch)(p.store);return(0,n.useEffect)(()=>{o()({path:"/wp/v2/settings"}).then(e=>{const t=Array.isArray(e?.zenpress_active_snippets)?e.zenpress_active_snippets:[],n={},i=window?.zenpressSnippetsMeta||{};Object.keys(i).forEach(e=>{const s=i[e]||{};n[e]={...s,"enable-snippet":t.includes(e)}}),s(n)}).catch(()=>{l((0,i.__)("Failed to load settings.","zenpress"))})},[l]),{snippets:e,setSnippets:s,saveSettings:()=>{a(!0);const s=Object.keys(e).filter(s=>e[s]?.["enable-snippet"]||!1);return o()({path:"/wp/v2/settings",method:"POST",data:{zenpress_active_snippets:s}}).then(()=>{r((0,i.__)("Settings saved.","zenpress"))}).catch(()=>{l((0,i.__)("Failed to save settings.","zenpress"))}).finally(()=>a(!1))},isSaving:t}})(),[_,w]=(0,n.useState)(new Set),v=e=>{s(s=>{const t={},n=new Set(_);return Object.entries(s).forEach(([s,a])=>{const r=(Array.isArray(a?.preset)?a.preset:[]).includes(e);t[s]={...a,"enable-snippet":r},r&&n.add(a.category||(0,i.__)("Uncategorized","zenpress"))}),w(n),t})},x={};Object.keys(e).forEach(s=>{const t=e[s],n=t?.category||(0,i.__)("Uncategorized","zenpress");x[n]||(x[n]=[]),x[n].push({name:s,data:t})});const j=Object.keys(x).sort((e,s)=>e.localeCompare(s,void 0,{sensitivity:"base"}));return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"zenpress-row",children:(0,l.jsxs)("div",{className:"zenpress-col",children:[(0,l.jsxs)("div",{className:"zenpress-presets",children:[(0,l.jsxs)("div",{className:"zenpress-presets-description",children:[(0,l.jsx)("p",{children:(0,i.__)("Select the features that suit your needs. If you don't know which ones to choose, just select your site's type and it will set the right features for you.","zenpress")}),(0,l.jsx)("h2",{children:(0,i.__)("You can choose you're website type","zenpress")})]}),(0,l.jsx)(a.Button,{variant:"secondary",onClick:()=>v("showcase-website"),__next40pxDefaultSize:!0,children:(0,i.__)("Showcase website","zenpress")}),(0,l.jsx)(a.Button,{variant:"secondary",onClick:()=>v("blog"),__next40pxDefaultSize:!0,children:(0,i.__)("Blog","zenpress")}),(0,l.jsx)(a.Button,{variant:"secondary",onClick:()=>v("ecommerce"),__next40pxDefaultSize:!0,children:(0,i.__)("E-commerce","zenpress")}),(0,l.jsx)("div",{className:"zenpress-presets-description",children:(0,l.jsx)("h2",{children:(0,i.__)("Or just pick what you need","zenpress")})}),(0,l.jsxs)("div",{className:"zenpress-actions-bulk",children:[(0,l.jsx)(a.Button,{variant:"secondary",onClick:()=>{s(e=>{const s={};return Object.keys(e).forEach(t=>{s[t]={...e[t],"enable-snippet":!0}}),s}),w(new Set(Object.values(e).map(e=>e.category||(0,i.__)("Uncategorized","zenpress"))))},__next40pxDefaultSize:!0,children:(0,i.__)("Enable all actions","zenpress")}),(0,l.jsx)(a.Button,{isDestructive:"true",onClick:()=>{s(e=>{const s={};return Object.keys(e).forEach(t=>{s[t]={...e[t],"enable-snippet":!1}}),s})},__next40pxDefaultSize:!0,children:(0,i.__)("Disable all actions","zenpress")})]})]}),j.map(e=>(0,l.jsx)(a.Panel,{children:(0,l.jsx)(a.PanelBody,{title:e,initialOpen:_.has(e)||x[e].some(({data:e})=>e?.["enable-snippet"]),children:x[e].map(({name:e,data:t})=>(0,l.jsx)(a.PanelRow,{children:(0,l.jsx)(d,{label:t.title||e,value:t?.["enable-snippet"]||!1,onChange:()=>{return t=e,void s(e=>({...e,[t]:{...e[t],"enable-snippet":!e[t]?.["enable-snippet"]}}));var t},help:t.description||""})},e))})},e)),(0,l.jsx)("div",{className:"zenpress-actions",children:(0,l.jsx)(h,{onClick:t,isBusy:r})}),(0,l.jsx)("div",{className:"zenpress-notices",children:(0,l.jsx)(u,{})})]})})})};t()(()=>{const e=document.getElementById("zenpress-settings");e&&(0,n.createRoot)(e).render((0,l.jsx)(_,{}))})})();